# spack-stack hash: 261cfcc
# spack hash: f1be100187
spack:
  concretizer:
    unify: when_possible

  view: false
  include:
  - site
  - common

  definitions:
  - compilers:
    - '%oneapi'
  - packages:
     - ufs-srw-app-env       ^esmf@=8.8.0
     - ufs-weather-model-env ^esmf@=8.8.0
     - crtm@2.4.0.1
     - mapl@2.53.4 ^esmf@8.8.0
     - esmf@=8.8.0 snapshot=none
     - madis@4.5
     - sp@2.5.0
  specs:
  - matrix:
    - [$packages]
    - [$compilers]
    exclude:
    # Don't build ai-env and jedi-tools-env with Intel or oneAPI,
    # some packages don't build (e.g., py-torch in ai-env doesn't
    # build with Intel, and there are constant problems concretizing
    # the environment
    - ai-env%intel
    - ai-env%oneapi
    - jedi-tools-env%intel
    - jedi-tools-env%oneapi
  packages:
    all:
      prefer: ['%oneapi']
      providers: 
        mpi: [intel-oneapi-mpi]
